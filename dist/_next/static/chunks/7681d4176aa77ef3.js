(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58887,e=>{"use strict";var a=e.i(47167),r=e.i(43476),t=e.i(71645),l=e.i(67881);let n=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function o({product:e}){let[o,c]=(0,t.useState)(!0),[i,s]=(0,t.useState)(""),d=(0,t.useRef)(null);(0,t.useEffect)(()=>{if(document.getElementById("paypal-script")){window.paypal&&d.current&&u();return}let e=document.createElement("script");e.id="paypal-script",e.src=`https://www.paypal.com/sdk/js?client-id=${a.default.env.NEXT_PUBLIC_PAYPAL_CLIENT_ID}&currency=USD&intent=capture`,e.async=!0,e.onload=()=>{console.log("PayPal SDK loaded"),d.current&&u()},e.onerror=()=>{s("Failed to load PayPal. Please check your internet connection."),c(!1)},document.body.appendChild(e)},[]);let u=()=>{if(!window.paypal||!d.current){s("PayPal is not available"),c(!1);return}try{let a=window.paypal.Buttons({style:{layout:"vertical",color:"gold",shape:"rect",label:"pay"},createOrder:(a,r)=>r.order.create({purchase_units:[{reference_id:e.id,description:e.name,amount:{currency_code:"USD",value:e.price.toFixed(2)}}]}),onApprove:async(e,a)=>{try{let e=await a.order.capture();console.log("Payment captured:",e),window.location.href="/dashboard?success=true"}catch(e){console.error("Capture error:",e),s("Payment failed. Please try again.")}},onError:e=>{console.error("PayPal error:",e),s("An error occurred with PayPal. Please try again.")},onCancel:()=>{console.log("Payment cancelled")}});if(!a.isEligible()){s("PayPal is not available for this browser."),c(!1);return}a.render(d.current).then(()=>{c(!1)}).catch(e=>{console.error("Render error:",e),s("Failed to display PayPal buttons."),c(!1)})}catch(e){console.error("Error creating buttons:",e),s("Failed to initialize PayPal."),c(!1)}};return i?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-red-500 text-sm text-center",children:i}),(0,r.jsx)(l.Button,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full",children:"Retry"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[o&&(0,r.jsxs)(l.Button,{disabled:!0,className:"w-full",children:[(0,r.jsx)(n,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading PayPal..."]}),(0,r.jsx)("div",{ref:d,className:`min-h-[45px] ${o?"hidden":""}`}),!o&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Secure payment powered by PayPal"})]})}e.s(["default",()=>o],58887)}]);