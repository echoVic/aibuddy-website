(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58887,e=>{"use strict";var a=e.i(43476),r=e.i(71645),t=e.i(67881);let l=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function o({product:e}){let[o,n]=(0,r.useState)(!0),[c,s]=(0,r.useState)(""),i=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(document.getElementById("paypal-script")){window.paypal&&i.current&&d();return}let e=document.createElement("script");e.id="paypal-script",e.src="https://www.paypal.com/sdk/js?client-id=AXTcKBw9PLoPwsLurZ2DRAmaDIfg-4TAwKgDNjClhY0iFGGtm1F3sIjIVTfz9P52l16GqWu1aPs24OeW&currency=USD&intent=capture",e.async=!0,e.onload=()=>{console.log("PayPal SDK loaded"),i.current&&d()},e.onerror=()=>{s("Failed to load PayPal. Please check your internet connection."),n(!1)},document.body.appendChild(e)},[]);let d=()=>{if(!window.paypal||!i.current){s("PayPal is not available"),n(!1);return}try{let a=window.paypal.Buttons({style:{layout:"vertical",color:"gold",shape:"rect",label:"pay"},createOrder:(a,r)=>r.order.create({purchase_units:[{reference_id:e.id,description:e.name,amount:{currency_code:"USD",value:e.price.toFixed(2)}}]}),onApprove:async(e,a)=>{try{let e=await a.order.capture();console.log("Payment captured:",e),window.location.href="/dashboard?success=true"}catch(e){console.error("Capture error:",e),s("Payment failed. Please try again.")}},onError:e=>{console.error("PayPal error:",e),s("An error occurred with PayPal. Please try again.")},onCancel:()=>{console.log("Payment cancelled")}});if(!a.isEligible()){s("PayPal is not available for this browser."),n(!1);return}a.render(i.current).then(()=>{n(!1)}).catch(e=>{console.error("Render error:",e),s("Failed to display PayPal buttons."),n(!1)})}catch(e){console.error("Error creating buttons:",e),s("Failed to initialize PayPal."),n(!1)}};return c?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-red-500 text-sm text-center",children:c}),(0,a.jsx)(t.Button,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full",children:"Retry"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[o&&(0,a.jsxs)(t.Button,{disabled:!0,className:"w-full",children:[(0,a.jsx)(l,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading PayPal..."]}),(0,a.jsx)("div",{ref:i,className:`min-h-[45px] ${o?"hidden":""}`}),!o&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Secure payment powered by PayPal"})]})}e.s(["default",()=>o],58887)}]);