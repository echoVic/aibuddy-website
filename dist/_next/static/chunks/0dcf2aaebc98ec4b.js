(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58887,e=>{"use strict";var t=e.i(47167),a=e.i(43476),r=e.i(71645),o=e.i(67881);let n=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function c({product:e}){let[c,l]=(0,r.useState)(!0),[s,d]=(0,r.useState)(""),[i,p]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(document.getElementById("paypal-sdk")){p(!0),l(!1);return}let e=document.createElement("script");e.id="paypal-sdk",e.src=`https://www.sandbox.paypal.com/sdk/js?client-id=${t.default.env.NEXT_PUBLIC_PAYPAL_CLIENT_ID}&currency=USD&intent=capture`,e.async=!0,e.onload=()=>{p(!0),l(!1)},e.onerror=()=>{d("Failed to load PayPal SDK"),l(!1)},document.body.appendChild(e)},[]),(0,r.useEffect)(()=>{i&&window.paypal&&window.paypal.Buttons({createOrder:async()=>{try{let t=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.id,price:e.price,name:e.name})});if(!t.ok)throw Error("Failed to create order");let{orderId:a}=await t.json();return a}catch(e){throw console.error("Create order error:",e),e}},onApprove:async e=>{try{if(!(await fetch("/api/capture",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.orderID})})).ok)throw Error("Payment capture failed");window.location.href="/dashboard?success=true"}catch(e){console.error("Capture error:",e),d("Payment failed. Please try again.")}},onError:e=>{console.error("PayPal error:",e),d("Payment error. Please try again.")},onCancel:()=>{console.log("Payment cancelled")}}).render("#paypal-button-container")},[i,e]),c)?(0,a.jsxs)(o.Button,{disabled:!0,className:"w-full",children:[(0,a.jsx)(n,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading PayPal..."]}):s?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-500 text-sm mb-2",children:s}),(0,a.jsx)(o.Button,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full",children:"Retry"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{id:"paypal-button-container",className:"min-h-[45px]"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Secure payment powered by PayPal"})]})}e.s(["default",()=>c],58887)}]);