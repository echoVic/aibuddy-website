{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///root/.openclaw/workspace/projects/ai-buddy/website/my-app/lib/email/client.ts"],"sourcesContent":["import { Resend } from 'resend';\n\nconst resend = new Resend(process.env.RESEND_API_KEY);\n\n// Use Resend's default domain for testing\n// For production, verify your domain at https://resend.com/domains\nexport const FROM_EMAIL = 'AI Buddy <onboarding@resend.dev>';\n\ninterface SendEmailParams {\n  to: string;\n  subject: string;\n  html: string;\n}\n\nexport async function sendEmail({ to, subject, html }: SendEmailParams) {\n  if (!process.env.RESEND_API_KEY) {\n    console.warn('RESEND_API_KEY not set, skipping email send');\n    return { success: false, error: 'RESEND_API_KEY not configured' };\n  }\n\n  try {\n    const { data, error } = await resend.emails.send({\n      from: FROM_EMAIL,\n      to,\n      subject,\n      html,\n    });\n\n    if (error) {\n      console.error('Resend error:', error);\n      return { success: false, error };\n    }\n\n    console.log('Email sent successfully:', data?.id);\n    return { success: true, id: data?.id };\n  } catch (error) {\n    console.error('Failed to send email:', error);\n    return { success: false, error };\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,SAAS,IAAI,oJAAM,CAAC,QAAQ,GAAG,CAAC,cAAc;AAI7C,MAAM,aAAa;AAQnB,eAAe,UAAU,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAmB;IACpE,IAAI,CAAC,QAAQ,GAAG,CAAC,cAAc,EAAE;QAC/B,QAAQ,IAAI,CAAC;QACb,OAAO;YAAE,SAAS;YAAO,OAAO;QAAgC;IAClE;IAEA,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC;YAC/C,MAAM;YACN;YACA;YACA;QACF;QAEA,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,OAAO;gBAAE,SAAS;gBAAO;YAAM;QACjC;QAEA,QAAQ,GAAG,CAAC,4BAA4B,MAAM;QAC9C,OAAO;YAAE,SAAS;YAAM,IAAI,MAAM;QAAG;IACvC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO;YAAE,SAAS;YAAO;QAAM;IACjC;AACF"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///root/.openclaw/workspace/projects/ai-buddy/website/my-app/lib/email/templates.ts"],"sourcesContent":["import { Product } from '@/lib/products';\n\ninterface PurchaseConfirmationData {\n  customerName: string;\n  product: Product;\n  orderId: string;\n  downloadUrl?: string;\n}\n\nexport function purchaseConfirmationTemplate(data: PurchaseConfirmationData): string {\n  const { customerName, product, orderId, downloadUrl } = data;\n\n  const isConsultation = product.type === 'consultation';\n  const downloadSection = downloadUrl ? `\n    <div style=\"background: #f3f4f6; padding: 20px; border-radius: 8px; margin: 24px 0;\">\n      <h3 style=\"margin-top: 0; color: #111827;\">ğŸ“¥ ä¸‹è½½æ‚¨çš„äº§å“</h3>\n      <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è·å–æ‚¨çš„ ${product.name}ï¼š</p>\n      <a href=\"${downloadUrl}\" \n         style=\"display: inline-block; background: #3b82f6; color: white; padding: 12px 24px; \n                text-decoration: none; border-radius: 6px; font-weight: 600; margin-top: 12px;\">\n        ç«‹å³ä¸‹è½½\n      </a>\n      <p style=\"font-size: 14px; color: #6b7280; margin-top: 16px;\">\n        é“¾æ¥å°†åœ¨ 7 å¤©åè¿‡æœŸï¼Œè¯·åŠæ—¶ä¸‹è½½ã€‚\n      </p>\n    </div>\n  ` : '';\n\n  const consultationSection = isConsultation ? `\n    <div style=\"background: #f3f4f6; padding: 20px; border-radius: 8px; margin: 24px 0;\">\n      <h3 style=\"margin-top: 0; color: #111827;\">ğŸ“… é¢„çº¦å’¨è¯¢</h3>\n      <p>è¯·ç‚¹å‡»ä¸‹æ–¹é“¾æ¥é¢„çº¦æ‚¨çš„ 1v1 å’¨è¯¢æ—¶é—´ï¼š</p>\n      <a href=\"https://calendly.com/aibuddy/consultation\" \n         style=\"display: inline-block; background: #3b82f6; color: white; padding: 12px 24px; \n                text-decoration: none; border-radius: 6px; font-weight: 600; margin-top: 12px;\">\n        é€‰æ‹©æ—¶é—´\n      </a>\n      <p style=\"font-size: 14px; color: #6b7280; margin-top: 16px;\">\n        è¯·åœ¨è´­ä¹°å 30 å¤©å†…å®Œæˆé¢„çº¦ã€‚\n      </p>\n    </div>\n  ` : '';\n\n  const githubSection = product.githubRepo ? `\n    <div style=\"background: #f3f4f6; padding: 20px; border-radius: 8px; margin: 24px 0;\">\n      <h3 style=\"margin-top: 0; color: #111827;\">ğŸ”— GitHub ä»“åº“è®¿é—®</h3>\n      <p>æ‚¨å·²è·å¾—ç§æœ‰ä»“åº“è®¿é—®æƒé™ï¼š</p>\n      <a href=\"https://github.com/${product.githubRepo}\" \n         style=\"display: inline-block; background: #24292e; color: white; padding: 12px 24px; \n                text-decoration: none; border-radius: 6px; font-weight: 600; margin-top: 12px;\">\n        è®¿é—®ä»“åº“\n      </a>\n      <p style=\"font-size: 14px; color: #6b7280; margin-top: 16px;\">\n        è®¿é—®ç”³è¯·å·²å‘é€ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ GitHub é€šçŸ¥ã€‚\n      </p>\n    </div>\n  ` : '';\n\n  return `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>è´­ä¹°ç¡®è®¤ - AI Buddy</title>\n</head>\n<body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; \n             line-height: 1.6; color: #374151; max-width: 600px; margin: 0 auto; padding: 20px;\">\n  \n  <div style=\"text-align: center; padding: 32px 0; border-bottom: 2px solid #e5e7eb;\">\n    <h1 style=\"color: #111827; margin: 0; font-size: 28px;\">AI Buddy</h1>\n    <p style=\"color: #6b7280; margin: 8px 0 0 0;\">æ„Ÿè°¢è´­ä¹°ï¼</p>\n  </div>\n\n  <div style=\"padding: 32px 0;\">\n    <p>Hi ${customerName || 'there'},</p>\n    \n    <p>æ„Ÿè°¢æ‚¨è´­ä¹° <strong>${product.name}</strong>ï¼æˆ‘ä»¬å·²æ”¶åˆ°æ‚¨çš„ä»˜æ¬¾ï¼Œè®¢å•è¯¦æƒ…å¦‚ä¸‹ï¼š</p>\n\n    <table style=\"width: 100%; border-collapse: collapse; margin: 24px 0;\">\n      <tr>\n        <td style=\"padding: 12px; border-bottom: 1px solid #e5e7eb; color: #6b7280;\">äº§å“</td>\n        <td style=\"padding: 12px; border-bottom: 1px solid #e5e7eb; text-align: right; font-weight: 600;\">${product.name}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 12px; border-bottom: 1px solid #e5e7eb; color: #6b7280;\">ä»·æ ¼</td>\n        <td style=\"padding: 12px; border-bottom: 1px solid #e5e7eb; text-align: right; font-weight: 600;\">$${product.price}</td>\n      </tr>\n      <tr>\n        <td style=\"padding: 12px; color: #6b7280;\">è®¢å•å·</td>\n        <td style=\"padding: 12px; text-align: right; font-family: monospace; font-size: 14px;\">${orderId}</td>\n      </tr>\n    </table>\n\n    ${downloadSection}\n    ${consultationSection}\n    ${githubSection}\n\n    <div style=\"background: #fef3c7; padding: 16px; border-radius: 8px; margin: 24px 0;\">\n      <p style=\"margin: 0; font-size: 14px; color: #92400e;\">\n        <strong>éœ€è¦å¸®åŠ©ï¼Ÿ</strong><br>\n        å›å¤æ­¤é‚®ä»¶æˆ–è”ç³» support@aibuddy.ltdï¼Œæˆ‘ä»¬ä¼šåœ¨ 24 å°æ—¶å†…å›å¤ã€‚\n      </p>\n    </div>\n  </div>\n\n  <div style=\"border-top: 1px solid #e5e7eb; padding: 24px 0; text-align: center; color: #9ca3af; font-size: 14px;\">\n    <p>AI Buddy Â· https://aibuddy.ltd</p>\n    <p style=\"margin-top: 8px;\">è¿™æ˜¯ä¸€å°è‡ªåŠ¨å‘é€çš„é‚®ä»¶ï¼Œè¯·å‹¿ç›´æ¥å›å¤ã€‚</p>\n  </div>\n\n</body>\n</html>\n  `.trim();\n}\n"],"names":[],"mappings":";;;;AASO,SAAS,6BAA6B,IAA8B;IACzE,MAAM,EAAE,YAAY,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG;IAExD,MAAM,iBAAiB,QAAQ,IAAI,KAAK;IACxC,MAAM,kBAAkB,cAAc,CAAC;;;oBAGrB,EAAE,QAAQ,IAAI,CAAC;eACpB,EAAE,YAAY;;;;;;;;;EAS3B,CAAC,GAAG;IAEJ,MAAM,sBAAsB,iBAAiB,CAAC;;;;;;;;;;;;;EAa9C,CAAC,GAAG;IAEJ,MAAM,gBAAgB,QAAQ,UAAU,GAAG,CAAC;;;;kCAIZ,EAAE,QAAQ,UAAU,CAAC;;;;;;;;;EASrD,CAAC,GAAG;IAEJ,OAAO,CAAC;;;;;;;;;;;;;;;;;UAiBA,EAAE,gBAAgB,QAAQ;;qBAEf,EAAE,QAAQ,IAAI,CAAC;;;;;0GAKsE,EAAE,QAAQ,IAAI,CAAC;;;;2GAId,EAAE,QAAQ,KAAK,CAAC;;;;+FAI5B,EAAE,QAAQ;;;;IAIrG,EAAE,gBAAgB;IAClB,EAAE,oBAAoB;IACtB,EAAE,cAAc;;;;;;;;;;;;;;;;;EAiBlB,CAAC,CAAC,IAAI;AACR"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///root/.openclaw/workspace/projects/ai-buddy/website/my-app/lib/products.ts"],"sourcesContent":["export interface Product {\n  id: string;\n  name: string;\n  description: string;\n  price: number;\n  currency: string;\n  type: 'pdf' | 'config' | 'consultation';\n  features: string[];\n  stripePriceId?: string;\n  downloadUrl?: string;\n  githubRepo?: string;\n}\n\nexport const products: Product[] = [\n  {\n    id: 'openclaw-quickstart',\n    name: 'OpenClaw Quick Start Guide',\n    description: '30åˆ†é’Ÿä»é›¶åˆ°èƒ½ç”¨ï¼ŒPDF æŒ‡å— + ä»£ç ç¤ºä¾‹',\n    price: 1,\n    currency: 'usd',\n    type: 'pdf',\n    features: [\n      'ä»€ä¹ˆæ˜¯ OpenClaw',\n      '5åˆ†é’Ÿå®‰è£…é…ç½®',\n      '10ä¸ªå³ç”¨åœºæ™¯',\n      'è¿›é˜¶ï¼šå†™ä½ çš„ç¬¬ä¸€ä¸ª Skill',\n      'æºç ç¤ºä¾‹',\n    ],\n    downloadUrl: '/guides/openclaw-quickstart.pdf',\n  },\n  {\n    id: 'openclaw-complete-guide',\n    name: 'OpenClaw å®Œæ•´æŒ‡å—',\n    description: 'æ·±åº¦æ•™ç¨‹ + å®æˆ˜æ¡ˆä¾‹ + æºç è§£æ',\n    price: 29,\n    currency: 'usd',\n    type: 'pdf',\n    features: [\n      'å®Œæ•´æ¶æ„è§£æ',\n      '20+ å®æˆ˜æ¡ˆä¾‹',\n      'Skill å¼€å‘è¿›é˜¶',\n      'ç§æœ‰ Discord ç¤¾ç¾¤',\n      'ç»ˆèº«æ›´æ–°',\n    ],\n  },\n  {\n    id: 'agent-config-pack',\n    name: 'Agent é…ç½®åŒ…',\n    description: '10ä¸ªå¼€ç®±å³ç”¨çš„ Agent é…ç½® + Skill æ¨¡æ¿',\n    price: 79,\n    currency: 'usd',\n    type: 'config',\n    features: [\n      '10ä¸ªå®ç”¨åœºæ™¯é…ç½®',\n      'å®Œæ•´ Skill æ¨¡æ¿',\n      'è§†é¢‘æ•™ç¨‹',\n      'ç§æœ‰ GitHub ä»“åº“è®¿é—®',\n      '30å¤©é€€æ¬¾ä¿è¯',\n    ],\n    githubRepo: 'aibuddy/agent-configs',\n  },\n  {\n    id: '1v1-consultation',\n    name: '1v1 å®šåˆ¶å’¨è¯¢',\n    description: 'ä¸“å± Agent æ¶æ„è®¾è®¡ + ä»£ç å®¡æŸ¥',\n    price: 299,\n    currency: 'usd',\n    type: 'consultation',\n    features: [\n      '2å°æ—¶ 1v1 è§†é¢‘',\n      'éœ€æ±‚æ·±åº¦åˆ†æ',\n      'æ¶æ„è®¾è®¡æ–¹æ¡ˆ',\n      'ä»£ç  Review',\n      '7å¤©è·Ÿè¿›æ”¯æŒ',\n    ],\n  },\n];\n\nexport function getProduct(id: string): Product | undefined {\n  return products.find(p => p.id === id);\n}"],"names":[],"mappings":";;;;;;AAaO,MAAM,WAAsB;IACjC;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,MAAM;QACN,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;QACD,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,MAAM;QACN,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,MAAM;QACN,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;QACD,YAAY;IACd;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;QACP,UAAU;QACV,MAAM;QACN,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;IACH;CACD;AAEM,SAAS,WAAW,EAAU;IACnC,OAAO,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;AACrC"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///root/.openclaw/workspace/projects/ai-buddy/website/my-app/app/api/test-email/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { sendEmail } from '@/lib/email/client';\nimport { purchaseConfirmationTemplate } from '@/lib/email/templates';\nimport { products } from '@/lib/products';\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { email } = await request.json();\n\n    if (!email) {\n      return NextResponse.json(\n        { error: 'Email is required' },\n        { status: 400 }\n      );\n    }\n\n    // Get the quick start guide product for testing\n    const product = products.find(p => p.id === 'openclaw-quickstart');\n    \n    if (!product) {\n      return NextResponse.json(\n        { error: 'Test product not found' },\n        { status: 500 }\n      );\n    }\n\n    // Generate a test download URL\n    const downloadUrl = `${process.env.NEXT_PUBLIC_APP_URL}/guides/openclaw-quickstart.pdf`;\n\n    // Send test email\n    const result = await sendEmail({\n      to: email,\n      subject: `ã€æµ‹è¯•ã€‘è´­ä¹°ç¡®è®¤ - ${product.name}`,\n      html: purchaseConfirmationTemplate({\n        customerName: 'æµ‹è¯•ç”¨æˆ·',\n        product,\n        orderId: 'TEST-' + Date.now(),\n        downloadUrl,\n      }),\n    });\n\n    if (!result.success) {\n      return NextResponse.json(\n        { error: 'Failed to send email', details: result.error },\n        { status: 500 }\n      );\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: 'Test email sent successfully',\n      emailId: result.id,\n    });\n  } catch (error) {\n    console.error('Test email error:', error);\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n    return NextResponse.json(\n      { error: 'Test failed', details: errorMessage },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEpC,IAAI,CAAC,OAAO;YACV,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAoB,GAC7B;gBAAE,QAAQ;YAAI;QAElB;QAEA,gDAAgD;QAChD,MAAM,UAAU,6HAAQ,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAE5C,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAyB,GAClC;gBAAE,QAAQ;YAAI;QAElB;QAEA,+BAA+B;QAC/B,MAAM,cAAc,2DAAmC,+BAA+B,CAAC;QAEvF,kBAAkB;QAClB,MAAM,SAAS,MAAM,IAAA,qIAAS,EAAC;YAC7B,IAAI;YACJ,SAAS,CAAC,WAAW,EAAE,QAAQ,IAAI,EAAE;YACrC,MAAM,IAAA,2JAA4B,EAAC;gBACjC,cAAc;gBACd;gBACA,SAAS,UAAU,KAAK,GAAG;gBAC3B;YACF;QACF;QAEA,IAAI,CAAC,OAAO,OAAO,EAAE;YACnB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;gBAAwB,SAAS,OAAO,KAAK;YAAC,GACvD;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,SAAS,OAAO,EAAE;QACpB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC9D,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;YAAe,SAAS;QAAa,GAC9C;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}